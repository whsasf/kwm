(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b10ae80"],{1542:function(e,t,a){},1790:function(e,t,a){"use strict";var r=a("44f5"),o=a.n(r);o.a},2532:function(e,t,a){"use strict";var r=a("23e7"),o=a("5a34"),n=a("1d80"),s=a("ab13");r({target:"String",proto:!0,forced:!s("includes")},{includes:function(e){return!!~String(n(this)).indexOf(o(e),arguments.length>1?arguments[1]:void 0)}})},"2c8c":function(e,t,a){"use strict";var r=a("1542"),o=a.n(r);o.a},"2ca0":function(e,t,a){"use strict";var r=a("23e7"),o=a("06cf").f,n=a("50c4"),s=a("5a34"),i=a("1d80"),l=a("ab13"),c=a("c430"),u="".startsWith,d=Math.min,h=l("startsWith"),p=!c&&!h&&!!function(){var e=o(String.prototype,"startsWith");return e&&!e.writable}();r({target:"String",proto:!0,forced:!p&&!h},{startsWith:function(e){var t=String(i(this));s(e);var a=n(d(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return u?u.call(t,r,a):t.slice(a,a+r.length)===r}})},"3bab":function(e,t,a){},4211:function(e,t,a){},"44f5":function(e,t,a){},5319:function(e,t,a){"use strict";var r=a("d784"),o=a("825a"),n=a("7b0b"),s=a("50c4"),i=a("a691"),l=a("1d80"),c=a("8aa5"),u=a("14c3"),d=Math.max,h=Math.min,p=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g,f=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,a,r){var w=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=r.REPLACE_KEEPS_$0,I=w?"$":"$0";return[function(a,r){var o=l(this),n=void 0==a?void 0:a[e];return void 0!==n?n.call(a,o,r):t.call(String(o),a,r)},function(e,r){if(!w&&v||"string"===typeof r&&-1===r.indexOf(I)){var n=a(t,e,this,r);if(n.done)return n.value}var l=o(e),p=String(this),m="function"===typeof r;m||(r=String(r));var g=l.global;if(g){var x=l.unicode;l.lastIndex=0}var y=[];while(1){var b=u(l,p);if(null===b)break;if(y.push(b),!g)break;var P=String(b[0]);""===P&&(l.lastIndex=c(p,s(l.lastIndex),x))}for(var S="",U=0,k=0;k<y.length;k++){b=y[k];for(var D=String(b[0]),_=d(h(i(b.index),p.length),0),z=[],R=1;R<b.length;R++)z.push(f(b[R]));var $=b.groups;if(m){var L=[D].concat(z,_,p);void 0!==$&&L.push($);var E=String(r.apply(void 0,L))}else E=C(D,p,_,z,$,r);_>=U&&(S+=p.slice(U,_)+E,U=_+D.length)}return S+p.slice(U)}];function C(e,a,r,o,s,i){var l=r+e.length,c=o.length,u=g;return void 0!==s&&(s=n(s),u=m),t.call(i,u,(function(t,n){var i;switch(n.charAt(0)){case"$":return"$";case"&":return e;case"`":return a.slice(0,r);case"'":return a.slice(l);case"<":i=s[n.slice(1,-1)];break;default:var u=+n;if(0===u)return t;if(u>c){var d=p(u/10);return 0===d?t:d<=c?void 0===o[d-1]?n.charAt(1):o[d-1]+n.charAt(1):t}i=o[u-1]}return void 0===i?"":i}))}}))},"5a34":function(e,t,a){var r=a("44e7");e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},"6d25":function(e,t,a){"use strict";var r=a("4211"),o=a.n(r);o.a},7550:function(e,t,a){"use strict";var r=a("f520"),o=a.n(r);o.a},"91f4":function(e,t,a){"use strict";var r=a("3bab"),o=a.n(r);o.a},"99af":function(e,t,a){"use strict";var r=a("23e7"),o=a("d039"),n=a("e8b5"),s=a("861d"),i=a("7b0b"),l=a("50c4"),c=a("8418"),u=a("65f0"),d=a("1dde"),h=a("b622"),p=a("2d00"),m=h("isConcatSpreadable"),g=9007199254740991,f="Maximum allowed index exceeded",w=p>=51||!o((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),v=d("concat"),I=function(e){if(!s(e))return!1;var t=e[m];return void 0!==t?!!t:n(e)},C=!w||!v;r({target:"Array",proto:!0,forced:C},{concat:function(e){var t,a,r,o,n,s=i(this),d=u(s,0),h=0;for(t=-1,r=arguments.length;t<r;t++)if(n=-1===t?s:arguments[t],I(n)){if(o=l(n.length),h+o>g)throw TypeError(f);for(a=0;a<o;a++,h++)a in n&&c(d,h,n[a])}else{if(h>=g)throw TypeError(f);c(d,h++,n)}return d.length=h,d}})},a15b:function(e,t,a){"use strict";var r=a("23e7"),o=a("44ad"),n=a("fc6a"),s=a("a640"),i=[].join,l=o!=Object,c=s("join",",");r({target:"Array",proto:!0,forced:l||!c},{join:function(e){return i.call(n(this),void 0===e?",":e)}})},a929:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Url"},[a("div",{staticClass:"url-p"},[a("div",{staticClass:"url-p1"},[a("i-button",{attrs:{type:"error",icon:"md-trash"},on:{click:e.deleteConfirm}},[e._v("删除")]),a("i-page",{attrs:{total:e.itemCount,current:e.currentPage,"page-size":e.pageSize,"page-size-opts":[10,20,30,40,50,100],size:"small","show-elevator":"","show-total":"","show-sizer":""},on:{"on-change":e.pageChange,"on-page-size-change":e.pageSizeChange}}),a("i-button",{attrs:{type:"warning"},on:{click:function(t){return e.exportDataX()}}},[a("i-icon",{attrs:{type:"md-download"}}),e._v(" 导出数据 ")],1)],1),a("div",{staticClass:"url-p2"},[a("i-button",{staticClass:"url-p21",attrs:{type:"primary",icon:"md-add-circle"},on:{click:e.addItem}},[e._v("手动添加")]),a("i-upload",{ref:"upload",staticClass:"url-p22",attrs:{format:["xlsx","xls"],action:"","show-upload-list":!1,"before-upload":e.handleBeforeUpload}},[a("i-button",{attrs:{type:"primary",icon:"md-cloud-upload"},on:{click:e.addItems}},[e._v("批量添加")])],1),a("i-button",{staticClass:"url-p23",attrs:{type:"primary",icon:"md-copy"},on:{click:e.downloadTemplate}},[e._v("下载模板")]),a("i-button",{staticClass:"url-p24",staticStyle:{color:"#fff","background-color":"#057009"},attrs:{height:"200",onMouseOver:"this.style.color='#b6f204'",onMouseOut:"this.style.color='#fff'",icon:"md-power"},on:{click:e.runcrawler}},[e._v("开始爬取")])],1)]),a("i-table",{ref:"table",staticClass:"Url-table",attrs:{columns:e.columns1,data:e.UrlItemData,loading:e.loading,stripe:"",border:""},on:{"on-selection-change":function(t){return e.handleSelectRow()},"on-filter-change":e.handleFilter},scopedSlots:e._u([{key:"action",fn:function(t){var r=t.row,o=t.index;return[a("div",{staticClass:"Url-actions"},[a("i-button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.Urledit(r)}}},[e._v("编辑")]),a("i-button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(t){return e.seeUrlDetail(r,o)}}},[e._v("检视")]),"无效"===r.status?a("i-button",{attrs:{type:"success",size:"small",shape:"circle"},on:{click:function(t){return e.tagValid({uid:r["_id"]["$oid"]})}}},[e._v("设为有效")]):"未开始"===r.status?a("i-button",{attrs:{type:"primary",shape:"circle",size:"small"},on:{click:function(t){return e.UrlAction(r)}}},[e._v("开始")]):"成功"===r.status?a("i-button",{attrs:{type:"success",shape:"circle",size:"small"},on:{click:function(t){return e.UrlAction(r)}}},[e._v("查看结果")]):"失败"===r.status?a("i-button",{attrs:{type:"warning",shape:"circle",size:"small"},on:{click:function(t){return e.UrlAction(r)}}},[e._v("重新开始")]):"运行中"===r.status?a("i-button",{attrs:{disabled:"",shape:"circle",type:"default",size:"small"},on:{click:function(t){return e.UrlAction(r)}}},[e._v("等待")]):e._e()],1)]}}])}),a("br"),a("i-page",{attrs:{total:e.itemCount,current:e.currentPage,"page-size":e.pageSize,"page-size-opts":[10,20,30,40,50,100],size:"small","show-elevator":"","show-total":"","show-sizer":""},on:{"on-change":e.pageChange,"on-page-size-change":e.pageSizeChange}}),a("i-itemPage",{key:e.xyz,attrs:{rowCategoies:e.rowCategoies,formCustom2:JSON.parse(JSON.stringify(e.formCustom)),urlItemWindowShow:e.urlItemWindowShow,urlItemPageTitle:e.urlItemPageTitle},on:{"update:urlItemWindowShow":function(t){e.urlItemWindowShow=t},"update:url-item-window-show":function(t){e.urlItemWindowShow=t},createUrlNewItem:e.handleUrlNewItem,deleteUrlNewItem:e.handleUrlDeleteItem}}),a("i-seeDetail",{key:e.seeDetailKey,attrs:{DetailWindowShow:e.DetailWindowShow,currentPageNum:e.currentPage,totalPageNum:Math.ceil(e.itemCount/e.pageSize),detailIndex:e.detailIndex,pageData:e.UrlItemData},on:{"update:DetailWindowShow":function(t){e.DetailWindowShow=t},"update:detail-window-show":function(t){e.DetailWindowShow=t},tagInvalid:e.tagInvalid,tagValid:e.tagValid,askForPrePage:e.fetchPrevPage,askForNextPage:e.fetchNextPage}}),a("i-exportData",{key:e.expordDataKey,attrs:{pageSize:e.pageSize,selectedFlag:e.selectedFlag,selected1:e.selected1,pageData2Export:e.pageData2Export,exportWindowShow:e.exportWindowShow},on:{"update:exportWindowShow":function(t){e.exportWindowShow=t},"update:export-window-show":function(t){e.exportWindowShow=t}}}),e.showLoading?a("div",{staticClass:"demo-spin-col",attrs:{span:"8"}},[a("i-spin",{attrs:{fix:""}},[a("i-icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),a("div",[e._v("Loading")])],1)],1):e._e()],1)},o=[],n=(a("99af"),a("caad"),a("c975"),a("a15b"),a("d81d"),a("fb6a"),a("b0c0"),a("d3b7"),a("ac1f"),a("2532"),a("5319"),a("1276"),a("2ca0"),a("498a"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("5530")),s=a("2f62"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Url-itemPage"},[a("i-modal",{attrs:{title:e.urlItemPageTitle,width:"60",closable:!1,"mask-closable":!1,styles:{top:"20px"},scrollable:!0},model:{value:e.urlItemWindowShow,callback:function(t){e.urlItemWindowShow=t},expression:"urlItemWindowShow"}},[a("div",{staticClass:"Url-itemPage-form"},[a("i-form",{ref:"formCustom",attrs:{model:e.formCustom,"label-width":50}},[e._l(e.formCustom.Items,(function(t,r){return a("div",{key:r},[a("div",{staticClass:"urlNewPageOutloop"},[a("i-formItem",{attrs:{label:"url"+(r+1),prop:"Items."+r+".rootUrl",rules:e.ruleCustom.rootUrl}},[a("div",{staticClass:"together"},[a("i-input",{staticClass:"management-newProject-name-input",attrs:{type:"text",placeholder:"请输入名称"},model:{value:t.rootUrl,callback:function(a){e.$set(t,"rootUrl",a)},expression:"item1.rootUrl"}}),a("i-button",{attrs:{size:"small",type:"error"},on:{click:function(t){return e.handleRemoveItem(r)}}},[e._v("删除整项")])],1)]),a("div",{staticClass:"Url-itemPage-form-urlIncludePath"},[e._l(t.urlIncludePath,(function(t,o){return a("div",{key:o},[a("i-row",[a("i-col",{staticClass:"Url-itemPage-form-urlIncludePath-inputs"},[a("label",{staticClass:"xlabel"},[e._v(e._s("运行路径"+(parseInt(o)+1)+" "))]),a("i-formItem",{staticClass:"Url-itemPage-form-urlIncludePath-inputs-input",attrs:{prop:"Items."+r+".urlIncludePath."+o+".path",rules:e.ruleCustom.path}},[a("i-input",{attrs:{type:"text",placeholder:"请输入运行路径"},model:{value:t.path,callback:function(a){e.$set(t,"path",a)},expression:"item2.path"}})],1),a("i-formItem",{staticClass:"Url-itemPage-form-urlIncludePath-inputs-select",attrs:{prop:"Items."+r+".urlIncludePath."+o+".type",rules:e.ruleCustom.type}},[a("i-select",{model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"item2.type"}},e._l(e.urlIncludePathSets,(function(t,r){return a("i-option",{key:r,attrs:{value:t}},[e._v(e._s(t))])})),1)],1),a("i-button",{staticClass:"Url-itemPage-form-urlIncludePath-inputs-delete",attrs:{size:"small",type:"error"},on:{click:function(t){return e.handleRemove("include",r,o)}}},[e._v("删除")])],1)],1)],1)})),a("i-row",[a("i-col",{staticClass:"addl",attrs:{offset:"8",span:"12"}},[a("i-button",{attrs:{type:"dashed",long:"",icon:"md-add"},on:{click:function(t){return e.handleAdd(r,"include")}}},[e._v("添加运行路径项")])],1)],1)],2),a("div",{staticClass:"Url-itemPage-form-urlExcludePath"},[e._l(t.urlExcludePath,(function(t,o){return a("div",{key:o},[a("i-row",[a("i-col",{staticClass:"Url-itemPage-form-urlExcludePath-inputs"},[a("label",{staticClass:"xlabel"},[e._v(e._s("排除路径"+(parseInt(o)+1)+" "))]),a("i-formItem",{staticClass:"Url-itemPage-form-urlExcludePath-inputs-input",attrs:{prop:"Items."+r+".urlExcludePath."+o+".path",rules:e.ruleCustom.path}},[a("i-input",{attrs:{type:"text",placeholder:"请输入排除路径"},model:{value:t.path,callback:function(a){e.$set(t,"path",a)},expression:"item4.path"}})],1),a("i-formItem",{staticClass:"Url-itemPage-form-urlExcludePath-inputs-select",attrs:{prop:"Items."+r+".urlExcludePath."+o+".type",rules:e.ruleCustom.type}},[a("i-select",{model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"item4.type"}},e._l(e.urlIncludePathSets,(function(t,r){return a("i-option",{key:r,attrs:{value:t}},[e._v(e._s(t))])})),1)],1),a("i-button",{staticClass:"Url-itemPage-form-urlExcludePath-inputs-delete",attrs:{size:"small",type:"error"},on:{click:function(t){return e.handleRemove("exclude",r,o)}}},[e._v("删除")])],1)],1)],1)})),a("i-row",[a("i-col",{staticClass:"addl",attrs:{offset:"8",span:"12"}},[a("i-button",{attrs:{type:"dashed",long:"",icon:"md-add"},on:{click:function(t){return e.handleAdd(r,"exclude")}}},[e._v("添加排除路径项")])],1)],1)],2),a("i-formItem",{attrs:{prop:"Items."+r+".category",rules:e.ruleCustom.category}},[a("div",{staticClass:"Url-itemPage-form-category-inside"},[a("label",{staticClass:"Url-itemPage-form-category-label"},[e._v("分类(可多选)")]),a("i-select",{staticClass:"Url-itemPage-form-category-select",attrs:{multiple:""},model:{value:t.category,callback:function(a){e.$set(t,"category",a)},expression:"item1.category"}},e._l(e.rowCategoies,(function(t){return a("i-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1)])],1)])})),a("i-formItem",[a("i-row",[a("i-col",{attrs:{span:"12"}},[a("i-button",{directives:[{name:"show",rawName:"v-show",value:""===e.formCustom.uid,expression:"formCustom.uid === ''"}],attrs:{type:"default",long:"",icon:"md-add"},on:{click:function(t){return e.handleAddItem()}}},[e._v("添加Url")])],1)],1)],1)],2)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("i-button",{directives:[{name:"show",rawName:"v-show",value:e.formCustom.uid,expression:"formCustom.uid"}],staticClass:"Url-itemPage-delete-button",attrs:{type:"error",size:"default"},on:{click:function(t){return e.modalDelete()}}},[e._v("删除")]),a("i-button",{attrs:{type:"default",size:"large"},on:{click:function(t){return e.modalCancel("formCustom")}}},[e._v("取消")]),a("i-button",{attrs:{disabled:0===this.finalCount,type:"primary",size:"large"},on:{click:function(t){return e.modalOk("formCustom")}}},[e._v("提交")])],1)])],1)},l=[],c=(a("a434"),{name:"itemPage",data:function(){var e=this,t=function(e,t,a){""===t?a(new Error("url不能为空")):t.toLowerCase().startsWith("https://")||t.toLowerCase().startsWith("http://")?a():a(new Error("url应以http://或https://开头"))},a=function(e,t,a){""===t?a(new Error("路径不能为空")):t.toLowerCase().startsWith("https://")||t.toLowerCase().startsWith("http://")?a():a(new Error("路径应以http://或https://开头"))},r=function(e,t,a){""===t?a(new Error("type不能为空")):"regex"!==t.toLowerCase()&&"包含"!==t.toLowerCase()?a(new Error("type只能是'regex' 或 '包含'")):a()},o=function(t,a,r){if(0===a.length)console.log("category empty"),r(new Error("分类不能为空"));else{for(var o in a)-1===e.rowCategoies.indexOf(a[o])&&r(new Error("包含未定义分类:"+a[o]));r()}};return{finalCount:1,formCustom:{},urlIncludePathSets:["regex","包含"],ruleCustom:{rootUrl:[{validator:t,trigger:"blur"}],path:[{validator:a,trigger:"blur"}],type:[{validator:r,trigger:"blur,change"}],category:[{validator:o,trigger:"blur,change"}]}}},props:["urlItemPageTitle","urlItemWindowShow","formCustom2","rowCategoies"],computed:Object(n["a"])({},Object(s["c"])(["currentUserName","baseurl","currentComponent"])),beforeDestroy:function(){},mounted:function(){var e=this;"{}"!==JSON.stringify(this.formCustom2)&&!0===this.urlItemWindowShow&&(this.$set(this.formCustom,"itemIndex",this.formCustom2.itemIndex),this.$set(this.formCustom,"uid",this.formCustom2.uid),this.$set(this.formCustom,"Items",this.formCustom2.Items),this.$nextTick((function(){""===e.formCustom2.uid&&""!==e.formCustom2.Items[0].rootUrl&&e.preSubmit("formCustom")})))},methods:{handleRemoveItem:function(e){this.formCustom.Items.splice(e,1),0===this.formCustom.Items.length&&(this.finalCount=0)},handleAddItem:function(){this.formCustom.itemIndex++,this.formCustom.Items.push({index:this.formCustom.itemIndex,rootUrl:"",category:[],statusEdit:"未开始",urlIncludeIndex:0,urlExcludeIndex:0,urlIncludePath:[],urlExcludePath:[]}),this.finalCount=1},handleAdd:function(e,t){var a=this;"include"===t?(a.formCustom.urlIncludeIndex++,a.formCustom.Items[e].urlIncludePath.push({path:"",type:"regex"})):"exclude"===t&&(a.formCustom.urlExcludeIndex++,a.formCustom.Items[e].urlExcludePath.push({path:"",type:"regex"}))},handleRemove:function(e,t,a){"include"===e?this.formCustom.Items[t].urlIncludePath.splice(a,1):"exclude"===e&&this.formCustom.Items[t].urlExcludePath.splice(a,1)},preSubmit:function(e){this.modalOk(e)},modalOk:function(e){var t=this;t.$refs[e].validate((function(e){if(e){console.log("验证成功");var a=[];for(var r in t.formCustom.Items){var o=t.formCustom.Items[r],n={};n["rootUrl"]=o.rootUrl,n["category"]=o.category,n["status"]="未开始";var s=[],i=[];for(var l in o.urlIncludePath)s.push(o.urlIncludePath[l]);for(var c in o.urlExcludePath)i.push(o.urlExcludePath[c]);n["urlIncludePath"]=s,n["urlExcludePath"]=i,a.push(n)}t.formCustom.uid?(console.log(a),t.$emit("createUrlNewItem",{uid:t.formCustom.uid,data:a})):(console.log("新建urls"),t.$emit("createUrlNewItem",{uid:"",data:a})),t.$emit("update:urlItemWindowShow",!1)}else t.$Message.error("提交失败")}))},modalCancel:function(e){this.$refs[e].resetFields(),this.$emit("update:urlItemWindowShow",!1)},modalDelete:function(){this.$emit("deleteUrlNewItem",{uid:this.formCustom.uid}),this.$emit("update:urlItemWindowShow",!1)}}}),u=c,d=(a("91f4"),a("2877")),h=Object(d["a"])(u,i,l,!1,null,"7c2f2ade",null),p=h.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Urls-seeDetail"},[a("i-modal",{attrs:{title:"该项目一共有"+e.totalPage+"个分页。第"+e.currentPage+"页有"+e.dataLength+"个Url, 当前第"+(e.currentIndex+1)+"个url: "+e.website2+"  状态: "+e.currentUrlStatus,width:"95",closable:!1,"mask-closable":!1,scrollable:!0,styles:{top:"20px"}},model:{value:e.DetailWindowShow,callback:function(t){e.DetailWindowShow=t},expression:"DetailWindowShow"}},[a("div",{staticClass:"Urls-seeDetail-main",attrs:{id:"iframe-parent"}},[e.DetailWindowShow?a("iframe",{key:e.refreshKey,ref:"iframe",staticClass:"Urls-seeDetail-iframe",attrs:{id:"iframe",src:e.website2,frameborder:"3",bordercolor:"red"}}):e._e(),a("div",{staticClass:"Urls-seeDetail-operate"},[a("i-button",{staticClass:"Urls-seeDetail-operate-button",attrs:{type:"warning",size:"large",disabled:"无效"===e.currentUrlStatus,icon:"md-warning"},on:{click:e.setInvalid}},[e._v("设为无效")]),a("i-button",{staticClass:"Urls-seeDetail-operate-button",attrs:{type:"success",size:"large",disabled:"无效"!==e.currentUrlStatus,icon:"md-medkit"},on:{click:e.setValid}},[e._v("设为有效")]),a("i-button",{staticClass:"Urls-seeDetail-operate-button speccial2",attrs:{type:"primary",size:"large",icon:"md-refresh"},on:{click:e.refresh}},[e._v("刷新当前")]),a("i-button",{staticClass:"Urls-seeDetail-operate-button speccial",attrs:{type:"info",size:"default",disabled:1===e.currentPage},on:{click:e.moveLast}},[e._v("上一页")]),a("i-button",{staticClass:"Urls-seeDetail-operate-button",attrs:{type:"info",size:"large",shape:"circle",disabled:0===e.currentIndex&&1===e.currentPage},on:{click:e.moveUp}},[e._v("上一个")]),a("i-button",{staticClass:"Urls-seeDetail-operate-button",attrs:{type:"info",size:"large",shape:"circle",disabled:e.currentIndex===e.dataLength-1&&e.currentPage===e.totalPage},on:{click:e.moveDown}},[e._v("下一个")]),a("i-button",{staticClass:"Urls-seeDetail-operate-button",attrs:{type:"info",size:"default",disabled:e.currentPage===e.totalPage},on:{click:e.moveNext}},[e._v("下一页")])],1)]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("i-button",{attrs:{type:"default",size:"large"},on:{click:function(t){return e.modalCancel("")}}},[e._v("关闭")])],1)])],1)},g=[],f={name:"seeDetail",data:function(){return{refreshKey:1,currentIndex:JSON.parse(JSON.stringify(this.detailIndex)),currentPage:JSON.parse(JSON.stringify(this.currentPageNum)),totalPage:JSON.parse(JSON.stringify(this.totalPageNum))}},mounted:function(){},props:["website","detailIndex","pageData","currentPageNum","totalPageNum","DetailWindowShow"],computed:{website2:function(){return 0===this.pageData.length?"https://www.stockhey.com":this.pageData[this.currentIndex]["rootUrl"]},currentUrlStatus:function(){return 0===this.pageData.length?"未开始":this.pageData[this.currentIndex]["status"]},dataLength:function(){return this.pageData.length}},beforeDestroy:function(){},methods:{refresh:function(){this.refreshKey=this.refreshKey+1},setInvalid:function(){var e=this,t=e.pageData[e.currentIndex]["_id"]["$oid"];e.$emit("tagInvalid",{uid:t,index:e.currentIndex})},setValid:function(){var e=this,t=e.pageData[e.currentIndex]["_id"]["$oid"];e.$emit("tagValid",{uid:t,index:e.currentIndex})},modalOk:function(){},modalCancel:function(){this.$emit("update:DetailWindowShow",!1)},moveLast:function(){this.currentPage>1&&this.$emit("askForPrePage")},moveNext:function(){this.currentPage<this.totalPage&&this.$emit("askForNextPage")},moveUp:function(){var e=this;e.currentIndex=e.currentIndex-1,console.log(e.currentIndex),-1===e.currentIndex&&e.currentPage>1&&e.$emit("askForPrePage")},moveDown:function(){var e=this;e.currentIndex=e.currentIndex+1,console.log(e.currentIndex),e.currentIndex===e.dataLength&&e.currentPage<e.totalPage&&e.$emit("askForNextPage")}}},w=f,v=(a("7550"),Object(d["a"])(w,m,g,!1,null,"f6c57ff0",null)),I=v.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"url-url-select ivu-select ivu-select-visible ivu-select-single ivu-select-default",staticStyle:{position:"relative"}},[a("i-input",{attrs:{clearable:!0,search:"",placeholder:"输入url关键词进行模糊查询"},on:{"on-change":e.urlSearch,"on-search":e.batchSearch,"on-clear":e.resetInput},model:{value:e.searchItem,callback:function(t){e.searchItem=t},expression:"searchItem"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.searchResult.length,expression:"searchResult.length !== 0"}],ref:"urlInputOptions",staticClass:"url-url-select-option ivu-select-dropdown",staticStyle:{position:"relative"},attrs:{"x-placement":"bottom-start"}},e._l(e.searchResult,(function(t,r){return a("i-option",{key:r,staticStyle:{"text-align":"left"},attrs:{tag:t["_id"]["$oid"],value:t.rootUrl},nativeOn:{click:function(a){return e.singleSearch(t)}}},[e._v(e._s(r+1+": "+t.rootUrl+" - "+t["_id"]["$oid"]))])})),1)],1)},x=[],y={name:"urlSearch",data:function(){return{searchItem:"",searchResult:[]}},computed:Object(n["a"])({},Object(s["c"])(["baseurl","currentComponent"])),props:[""],methods:{singleSearch:function(e){this.$emit("singleSearch",e)},resetInput:function(){this.searchItem="",this.searchResult=[],this.$emit("resetInput")},batchSearch:function(){this.$emit("batchSearch",this.searchItem)},urlSearch:function(){var e=this,t=e.searchItem;if(this.$emit("syncQuery",t),""!==t){var a={urlPart:e.searchItem.toLowerCase()};e.axios({method:"get",url:e.baseurl+"Urls/"+e.currentComponent,params:a}).then((function(t){e.searchResult=t.data.content})).catch((function(e){console.log(e)}))}else e.searchResult=[]}}},b=y,P=(a("1790"),Object(d["a"])(b,C,x,!1,null,null,null)),S=P.exports,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Urls-seeDetail"},[a("i-modal",{attrs:{title:"导出数据",width:"40",closable:!1,"mask-closable":!1,scrollable:!0},model:{value:e.exportWindowShow,callback:function(t){e.exportWindowShow=t},expression:"exportWindowShow"}},[a("h3",[e._v("1. 请选择要导出的数据范围: ")]),a("i-radioGroup",{model:{value:e.selected3,callback:function(t){e.selected3=t},expression:"selected3"}},[a("i-radio",{attrs:{label:"当前选中",border:"",disabled:0===e.selectedFlag.length}}),a("i-radio",{attrs:{label:"当前页",border:""}}),a("i-radio",{attrs:{label:"当前项目",border:""}})],1),a("h3",[e._v("2. 请选择要导出的数据格式: ")]),a("i-radioGroup",{model:{value:e.selected2,callback:function(t){e.selected2=t},expression:"selected2"}},[a("i-radio",{attrs:{label:"xlsx",border:""}})],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("i-button",{attrs:{type:"default",size:"large"},on:{click:function(t){return e.modalCancel()}}},[e._v("取消")]),a("i-button",{attrs:{type:"primary",size:"large"},on:{click:function(t){return e.modalOk()}}},[e._v("导出")])],1)],1)],1)},k=[],D={name:"exportData",data:function(){return{selected3:"当前选中",selected2:"xlsx"}},mounted:function(){},created:function(){this.selected3=this.selected1},props:["exportWindowShow","selected1","selectedFlag","pageData2Export","pageSize"],computed:Object(n["a"])({},Object(s["c"])(["baseurl","currentComponent"])),beforeDestroy:function(){},methods:{generateData:function(e){var t=1,a=[];for(var r in e){var o=e[r],n=o.urlIncludePath.length>o.urlExcludePath.length?o.urlIncludePath.length:o.urlExcludePath.length;if(n>0)for(var s=0;s<n;s++){var i=[];i.push(t),i.push(o.rootUrl);var l=["urlIncludePath","urlExcludePath"];for(var c in l){var u=o[l[c]][s];u?(i.push(u.path),i.push(u.type)):(i.push(""),i.push(""))}i.push(o.category.join(",")),i.push(o.status),i.push(o.modifiedTime),a.push(i),t++}else{var d=[];d.push(t),d.push(o.rootUrl),d.push(""),d.push(""),d.push(""),d.push(""),d.push(o.category.join(",")),d.push(o.status),d.push(o.modifiedTime),a.push(d),t++}}return a},modalOk:function(){var e=this,t=[];if(t.push(["id","Url","运行路径","运行路径类型","排除路径","排除路径类型","分类","状态","变更时间"]),t.push(["","","","","","","","",""]),"当前选中"===e.selected3||"当前页"===e.selected3){var a=[];if(e.selectedFlag.length>0)for(var r in e.selectedFlag)a.push(e.pageData2Export[e.selectedFlag[r]-1]);else a=e.pageData2Export;t=t.concat(e.generateData(a));var o=e.$XLSX.utils.aoa_to_sheet(t),n=e.$XLSX.utils.book_new();e.$XLSX.utils.book_append_sheet(n,o,"Urls数据"),e.$XLSX.writeFile(n,e.currentComponent+".xlsx"),e.$emit("update:exportWindowShow",!1)}if("当前选中"!==e.selected3&&"当前页"!==e.selected3){var s={currentPage:0,pageSize:0};e.axios({method:"get",url:e.baseurl+"Urls/"+e.currentComponent,params:s}).then((function(a){var r=a.data.content;t=t.concat(e.generateData(r));var o=e.$XLSX.utils.aoa_to_sheet(t),n=e.$XLSX.utils.book_new();e.$XLSX.utils.book_append_sheet(n,o,"数据"),e.$XLSX.writeFile(n,e.currentComponent+".xlsx"),e.$emit("update:exportWindowShow",!1)})).catch((function(e){console.log(e)}))}},modalCancel:function(){this.$emit("update:exportWindowShow",!1)}}},_=D,z=(a("6d25"),Object(d["a"])(_,U,k,!1,null,"87050af0",null)),R=z.exports,$={name:"Url",data:function(){var e=this;return{showLoading:!1,exportWindowShow:!1,expordDataKey:20,pageData2Export:[],selected1:"当前选中",selectedFlag:[],excelNoteData:[["","使用前必看！"],["",""],[1,"请将数据按照示例格式填写在Urls sheet中"],[2,"不要修改Utls sheet的名称，否则会出错"],[3,"不要使用中文逗号等分隔符"],[4,"路径载入方式从 regex 和 包含 中二选一"],[5,"从第3行开始写"],[6,"当前可选的目录。填写的未在可选目录中的目录,会被忽略掉，此处小心"],[]],excelTemplateData:{data:[["Url(必填)","运行路径","运行路径类型(regex 和 包含 二选一)","排除路径","排除路径类型regex 和 包含 二选一","分类(相同Url,分类相同,可以只写第一个,或者全写.英文逗号分隔)"],["","","","","",""],["https://www.baidu.com","https://www.baidu.com/include1","regex","https://www.baidu.com/exclude1","regex","分类1,分类2,分类3,分类4,分类5,分类6"],["https://www.baidu.com","https://www.baidu.com/include2","包含","https://www.baidu.com/exclude2","regex","分类1,分类2,分类3,分类4,分类5,分类6"],["https://www.baidu.com","https://www.baidu.com/include3","regex","https://www.baidu.com/exclude3","包含","分类1,分类2,分类3,分类4,分类5,分类6"],["https://www.stockhey.com","https://www.stockhey.com/include1","regex","https://www.stockhey.com/exclude1","包含","分类1,分类2,分类4"],["https://www.stockhey.com","https://www.stockhey.com/include2","包含","https://www.stockhey.com/exclude2","regex",""]]},xyz:1e3,searchReaultListvisible:!0,searchItem:"",seeDetailKey:0,DetailWindowShow:!1,detailIndex:0,searchResult:[],okData:[],badData:[],selectedItemList:[],categoryChecked:[],statusChecked:[],dataRange:["",""],loading:!1,itemCount:0,currentPage:1,pageSize:10,select3:"Url",projetcCategoriesList:[],rowCategoies:[],urlItemPageShow:!1,urlItemWindowShow:!1,urlItemPageTitle:"单条添加",columns1:[{type:"selection",width:30,align:"center",resizable:!0,fixed:"left"},{title:"id",key:"id",width:45,align:"center",resizable:!0,fixed:"left"},{title:"Url",key:"rootUrl",align:"left",minWidth:200,resizable:!0,render:function(e,t){return e("a",{on:{click:function(){window.open(t.row.rootUrl)}}},t.row.rootUrl)},renderHeader:function(t){return t("span",[t("span","Url"),t("i-poptip",{props:{title:"URL过滤",content:"content",placement:"top",transfer:!0,trigger:"click",width:400,"word-wrap":!0},style:{"margin-left":"5px",color:function(){return e.searchItem?"#2d8cf0":"#c5c8ce"}(),cursor:"pointer"}},[t("i-icon",{props:{type:"md-search",size:20}}),t(S,{slot:"content",on:{singleSearch:function(t){e.singleSearch(t)},syncQuery:function(t){e.searchItem=t},batchSearch:function(t){e.batchSearch(t)},resetInput:function(){e.resetInput()}}})])])},fixed:"left"},{title:"运行路径",key:"urlIncludePath",align:"left",minWidth:200,resizable:!0,render:function(e,t){return t.row.urlIncludePath.map((function(t,a){return e("div",[e("span",{style:{color:"#212891"}},"("+(parseInt(a)+1)+") "),e("span",t.path),e("span",{style:{color:"#057009"}},"["+t.type+"]")])}))}},{title:"排除路径",key:"urlExcludePath",align:"left",minWidth:200,resizable:!0,render:function(e,t){return t.row.urlExcludePath.map((function(t,a){return e("div",[e("span",{style:{color:"#212891"}},"("+(parseInt(a)+1)+") "),e("span",t.path),e("span",{style:{color:"#057009"}},"["+t.type+"]")])}))}},{title:"分类",key:"category",align:"left",minWidth:120,filters:[],filterMultiple:!0,filterMethod:function(e,t){return t},resizable:!0,render:function(e,t){return e("p",t.row.category.join(";"))}},{title:"状态",key:"status",align:"center",minWidth:60,filters:[{label:"无效",value:"无效"},{label:"未开始",value:"未开始"},{label:"运行中",value:"运行中"},{label:"成功",value:"成功"},{label:"失败",value:"失败"}],filterMethod:function(e,t){return t},resizable:!0,render:function(e,t){return"无效"===t.row.status?e("p",{style:{"background-color":"rgba(100, 108, 122, 0.5)"}},t.row.status):"未开始"===t.row.status?e("p",t.row.status):"成功"===t.row.status?e("p",{style:{"background-color":"rgba(14, 237, 66, 0.5)"}},t.row.status):"失败"===t.row.status?e("p",{style:{"background-color":"rgba(237, 14, 40, 0.5)"}},t.row.status):"运行中"===t.row.status?e("p",{style:{"background-color":"rgba(247, 239, 4, 0.5)"}},t.row.status):void 0}},{title:"变更时间",key:"modifiedTime",align:"center",minWidth:100,resizable:!0,renderHeader:function(t){return t("span",[t("span","变更时间"),t("i-poptip",{props:{title:"日期过滤",content:"content",placement:"left-start",transfer:!0,trigger:"click",width:400},style:{"margin-left":"5px",color:function(){return 2===e.dataRange.length&&""===e.dataRange[0]&&""===e.dataRange[1]?"#c5c8ce":"#2d8cf0"}(),cursor:"pointer"}},[t("i-icon",{props:{type:"ios-funnel",size:16}}),t("i-datePicker",{slot:"content",props:{type:"datetimerange",placeholder:"选择日期时间区间",transfer:!1,format:"yyyy/MM/dd HH:mm:ss"},style:{position:"static",width:"320px"},on:{"on-change":function(t){e.TimeChange(t)}}})])])}},{title:"操作",key:"action",slot:"action",align:"center",width:150,fixed:"right",resizable:!0}],UrlItemData:[],formCustom:{}}},computed:Object(n["a"])({},Object(s["c"])(["baseurl","currentComponent"])),created:function(){this.fetchAllItems()},components:{"i-itemPage":p,"i-seeDetail":I,"i-exportData":R},mounted:function(){this.fetchProjectCategories()},beforeDestroy:function(){this.$Message.destroy()},methods:{downloadTemplate:function(){var e=JSON.parse(JSON.stringify(this.rowCategoies));e.unshift(""),this.excelNoteData[8]=e;var t=this.$XLSX.utils.aoa_to_sheet(this.excelNoteData),a=this.$XLSX.utils.aoa_to_sheet(this.excelTemplateData.data),r=this.$XLSX.utils.book_new();this.$XLSX.utils.book_append_sheet(r,t,"说明"),this.$XLSX.utils.book_append_sheet(r,a,"Urls"),this.$XLSX.writeFile(r,"Urls-template.xlsx")},handleOtherclick:function(e){this.$refs.urlInputOptions.contains(e.target)||(this.searchResult=[])},fetchNextPage:function(){var e=this;e.currentPage=this.currentPage+1,e.detailIndex=0,e.UrlItemData=[];var t={currentPage:e.currentPage,pageSize:e.pageSize,dataRange:encodeURIComponent(e.dataRange),UrlId:"",urlPart:e.searchItem.toLowerCase(),categoryFilter:encodeURIComponent(e.categoryChecked),statusFilter:encodeURIComponent(e.statusChecked)};e.fetchItems(t)},fetchPrevPage:function(){var e=this;e.currentPage=e.currentPage-1,e.detailIndex=e.pageSize-1,e.UrlItemData=[];var t={currentPage:e.currentPage,pageSize:e.pageSize,dataRange:encodeURIComponent(e.dataRange),UrlId:"",urlPart:e.searchItem.toLowerCase(),categoryFilter:encodeURIComponent(e.categoryChecked),statusFilter:encodeURIComponent(e.statusChecked)};e.fetchItems(t)},fetchProjectCategories:function(){var e=this;e.axios({method:"get",url:e.baseurl+"Categories/"+e.currentComponent}).then((function(t){for(var a in t.data.content)e.projetcCategoriesList.push({label:t.data.content[a].categoryName,value:t.data.content[a].categoryName}),e.rowCategoies.push(t.data.content[a].categoryName);e.columns1[5].filters=e.projetcCategoriesList})).catch((function(e){console.log(e)}))},tagValid:function(e){var t=this;console.log(e);var a=e.uid,r={status:"未开始"};t.axios({method:"patch",url:t.baseurl+"Urls/"+t.currentComponent+"/"+a,data:r}).then((function(a){console.log(a);var r={currentPage:t.currentPage,pageSize:t.pageSize,dataRange:encodeURIComponent(t.dataRange),UrlId:"",urlPart:t.searchItem.toLowerCase(),categoryFilter:encodeURIComponent(t.categoryChecked),statusFilter:encodeURIComponent(t.statusChecked)};e.index&&(t.detailIndex=e.index),t.fetchItems(r)})).catch((function(e){console.log(e)}))},tagInvalid:function(e){console.log(e);var t=this,a=e.uid;t.detailIndex=e.index;var r={status:"无效"},o={currentPage:t.currentPage,pageSize:t.pageSize};t.axios({method:"patch",url:t.baseurl+"Urls/"+t.currentComponent+"/"+a,data:r,params:o}).then((function(a){console.log(a);var r={currentPage:t.currentPage,pageSize:t.pageSize,dataRange:encodeURIComponent(t.dataRange),UrlId:"",urlPart:t.searchItem.toLowerCase(),categoryFilter:encodeURIComponent(t.categoryChecked),statusFilter:encodeURIComponent(t.statusChecked)};e.index&&(t.detailIndex=e.index),t.fetchItems(r)})).catch((function(e){console.log(e),t.$Message.error(e.response.data.detail)}))},seeUrlDetail:function(e,t){this.detailIndex=t,this.seeDetailKey=this.seeDetailKey+1,this.DetailWindowShow=!0},TimeChange:function(e){var t=this;console.log("time changed"),t.dataRange=e;var a={currentPage:t.currentPage,pageSize:t.pageSize,dataRange:encodeURIComponent(t.dataRange),UrlId:"",urlPart:t.searchItem.toLowerCase(),categoryFilter:encodeURIComponent(t.categoryChecked),statusFilter:encodeURIComponent(t.statusChecked)};t.fetchItems(a)},resetSearch:function(e){!1===e&&(this.searchResult=[])},resetInput:function(){var e=this;console.log("reset input"),e.searchItem="",e.searchResult=[],e.detailIndex=0,e.fetchAllItems()},handleFilter:function(e){var t=this,a={key:e["key"],checked:e["_filterChecked"]};"category"===a.key?t.categoryChecked=a["checked"]:"status"===a.key&&(t.statusChecked=a["checked"]),t.currentPage=1;var r={currentPage:t.currentPage,pageSize:t.pageSize,dataRange:encodeURIComponent(t.dataRange),urlPart:t.searchItem.toLowerCase(),categoryFilter:encodeURIComponent(t.categoryChecked),statusFilter:encodeURIComponent(t.statusChecked)};t.fetchItems(r)},singleSearch:function(e){var t=this;console.log("singleSearch"),t.searchItem=e.rootUrl,console.log("uid",e["_id"]["$oid"]),console.log("searchItem",t.searchItem),t.searchResult=[],t.categoryChecked=[],t.statusChecked=[],t.dataRange=["",""],t.currentPage=1;var a={currentPage:t.currentPage,pageSize:t.pageSize,UrlId:e["_id"]["$oid"]};t.fetchItems(a),t.searchItem=""},batchSearch:function(e){var t=this;console.log("batchSearch"),t.searchItem=e,this.searchResult=[],t.currentPage=1;var a={currentPage:t.currentPage,pageSize:t.pageSize,dataRange:encodeURIComponent(t.dataRange),urlPart:t.searchItem.toLowerCase(),categoryFilter:encodeURIComponent(t.categoryChecked),statusFilter:encodeURIComponent(t.statusChecked)};t.fetchItems(a)},urlSearch:function(){console.log("urlSearch running ...");var e=this,t=e.searchItem;if(""!==t){var a={currentPage:0,pageSize:0,UrlId:"",dataRange:encodeURIComponent(e.dataRange),urlPart:e.searchItem.toLowerCase(),categoryFilter:encodeURIComponent(e.categoryChecked),statusFilter:encodeURIComponent(e.statusChecked)};e.axios({method:"get",url:e.baseurl+"Urls/"+e.currentComponent,params:a}).then((function(t){e.searchResult=t.data.content})).catch((function(e){console.log(e)}))}else e.searchResult=[]},handleSelected:function(e){console.log(e)},handleBeforeUpload:function(e){var t=this,a={xlsx:"1",xls:"1"};if("1"===a[e.name.split(".")[1].toLowerCase()]){var r=[],o=[],n=new FileReader;return n.readAsArrayBuffer(e),n.onload=function(e){var a=new Uint8Array(e.target.result),n=t.$XLSX.read(a,{type:"array"}),s=t.$XLSX.utils.sheet_to_json(n.Sheets.Urls,{header:1,blankrows:!1,defval:""}).slice(2);for(var i in s){var l=o.indexOf(s[i][0]);if(-1!==l)r[l]["urlIncludePath"].push({path:s[i][1].trim(),type:s[i][2].trim()}),r[l]["urlIncludeIndex"]++,r[l]["urlExcludePath"].push({path:s[i][3].trim(),type:s[i][4].trim()}),r[l]["urlExcludeIndex"]++;else{var c=o.push(s[i][0])-1;r[c]={status:"未开始"},r[c]["rootUrl"]=s[i][0].trim(),r[c]["urlIncludePath"]=[{path:s[i][1].trim(),type:s[i][2].trim()}],r[c]["urlIncludeIndex"]=1,r[c]["urlExcludePath"]=[{path:s[i][3].trim(),type:s[i][4].trim()}],r[c]["urlExcludeIndex"]=1,r[c]["category"]=s[i][5].trim().replace(/，/g,",").split(",")}}for(var u in t.badData=[],t.okData=[],r){var d=r[u];if((d["rootUrl"].toLowerCase().startsWith("https://")||d["rootUrl"].toLowerCase().startsWith("http://"))&&""!==d["rootUrl"])if(""!==d["category"][0]){var h=[];for(var p in console.log(h),d["category"])t.rowCategoies.includes(d["category"][p])&&h.push(d["category"][p]);if(d["category"]=h,0!==h.length){var m=0;for(var g in d["urlExcludePath"]){var f=d["urlExcludePath"][g];if(!f["path"].toLowerCase().startsWith("https://")&&!f["path"].toLowerCase().startsWith("http://")||""===f["path"]){m=1;break}if("regex"!==f["type"].toLowerCase()&&"包含"!==f["type"].toLowerCase()){f["type"]="",m=1;break}}if(1!==m){var w=0;for(var v in d["urlIncludePath"]){var I=d["urlIncludePath"][v];if(!I["path"].toLowerCase().startsWith("https://")&&!I["path"].toLowerCase().startsWith("http://")||""===I["path"]){w=1;break}if("regex"!==I["type"].toLowerCase()&&"包含"!==I["type"].toLowerCase()){I["type"]="",w=1;break}}1!==w?(t.okData.push(d),console.log("good")):t.badData.push(d)}else t.badData.push(d)}else t.badData.push(d)}else console.log("category空"),d["category"]=[],t.badData.push(d);else t.badData.push(d)}0!==t.badData.length?(t.formCustom={itemIndex:t.badData.length,uid:"",Items:t.badData},t.urlItemPageTitle="批量添加 待修正项",t.xyz--,t.urlItemWindowShow=!0):t.handleUrlNewItem({uid:"",data:[]})},!1}t.$Message.error("文件类型必须是 xlsx 或 xls")},deleteConfirm:function(){var e=this,t=this;0===t.selectedItemList.length?t.$Message.info("无待删除项"):t.$Modal.confirm({title:"删除确认",content:"<p>删除后不可恢复,如果确定删除,请确认</p>",onOk:function(){e.deleteItems()},onCancel:function(){}})},deleteItems:function(){var e=this,t=[];for(var a in e.selectedItemList)t.push(e.selectedItemList[a]["_id"]["$oid"]);e.axios({method:"delete",url:e.baseurl+"Urls/"+e.currentComponent,data:t}).then((function(t){e.currentPage=1,""!==t.data.count&&(e.itemCount=t.data.count),e.selectedItemList=[],e.UrlItemData=t.data.content})).catch((function(e){console.log(e.response.data.detail)}))},handleSelectRow:function(){this.selectedItemList=this.$refs.table.getSelection()},exportDataX:function(){var e=this;if(0!==e.selectedItemList.length)if(e.selectedItemList.length===e.UrlItemData.length){e.selected1="当前页";var t=[];e.selectedFlag=t}else{e.selected1="当前选中";var a=[];for(var r in e.selectedItemList)a.push(e.selectedItemList[r].id);e.selectedFlag=a}else{e.selected1="当前页";var o=[];e.selectedFlag=o}e.pageData2Export=e.UrlItemData,e.expordDataKey++,e.exportWindowShow=!0},Urledit:function(e){var t=this,a={};a.uid=e["_id"]["$oid"],a.itemIndex=1,a.Items=[],a.Items.push({rootUrl:e.rootUrl}),a.Items[0].category=e.category;var r=[];for(var o in e.urlIncludePath)r.push(e.urlIncludePath[o]);var n=[];for(var s in e.urlExcludePath)n.push(e.urlExcludePath[s]);a.Items[0].urlIncludePath=r,a.Items[0].urlExcludePath=n,a.Items[0].urlIncludeIndex=r.length,a.Items[0].urlExcludeIndex=n.length,t.urlItemPageTitle="单条编辑",t.formCustom=a,t.urlItemWindowShow=!0,t.xyz--},fetchAllItems:function(){var e=this,t={currentPage:e.currentPage,pageSize:e.pageSize,dataRange:encodeURIComponent(e.dataRange),UrlId:"",urlPart:e.searchItem.toLowerCase(),categoryFilter:encodeURIComponent(e.categoryChecked),statusFilter:encodeURIComponent(e.statusChecked)};e.fetchItems(t)},fetchItems:function(e){var t=this,a=e;t.loading=!0,t.axios({method:"get",url:t.baseurl+"Urls/"+t.currentComponent,params:a}).then((function(e){""!==e.data.count&&(t.itemCount=e.data.count),t.seeDetailKey=t.seeDetailKey+1,t.UrlItemData=e.data.content,t.loading=!1})).catch((function(e){t.loading=!1,console.log(e)}))},handleUrlDeleteItem:function(e){var t=this,a=e["uid"];t.axios({method:"delete",url:t.baseurl+"Urls/"+t.currentComponent,data:[a]}).then((function(e){t.currentPage=1,""!==e.data.count&&(t.itemCount=e.data.count),t.UrlItemData=e.data.content})).catch((function(e){console.log(e.response.data.detail)}))},handleUrlNewItem:function(e){var t=this;if(e["uid"]){var a={currentPage:t.currentPage,pageSize:t.pageSize};t.showLoading=!0,t.axios({method:"put",url:t.baseurl+"Urls/"+t.currentComponent+"/"+e.uid,data:e["data"][0],params:a}).then((function(e){""!==e.data.count&&(t.itemCount=e.data.count),t.showLoading=!1,t.UrlItemData=e.data.content})).catch((function(e){t.showLoading=!1,console.log(e.response.data.detail),t.$Message.error(e.response.data.detail)}))}else{t.currentPage=Math.ceil((t.itemCount+1)/t.pageSize);var r={currentPage:t.currentPage,pageSize:t.pageSize},o=t.okData;if(e.data.length>0&&(o=o.concat(e.data)),0===o.length)return void t.$Message.warning("添加项为空,跳过添加!");t.showLoading=!0,t.axios({method:"post",url:t.baseurl+"Urls/"+t.currentComponent,data:o,params:r}).then((function(e){""!==e.data.count&&(t.itemCount=e.data.count),t.UrlItemData=e.data.content,t.showLoading=!1,t.$Message.success(o.length+"个URL上传成功")})).catch((function(e){t.showLoading=!1,console.log(e.response.data.detail),t.$Message.error({content:JSON.stringify(e.response.data.detail),duration:0,closable:!0});var a={currentPage:t.currentPage,pageSize:t.pageSize,dataRange:encodeURIComponent(t.dataRange),UrlId:"",urlPart:t.searchItem.toLowerCase(),categoryFilter:encodeURIComponent(t.categoryChecked),statusFilter:encodeURIComponent(t.statusChecked)};t.fetchItems(a)}))}},pageChange:function(e){this.currentPage=e,this.detailIndex=0,this.fetchAllItems()},pageSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.detailIndex=0,this.fetchAllItems()},addItem:function(){var e=this;e.urlItemPageTitle="手动添加",e.formCustom={itemIndex:1,uid:"",Items:[{rootUrl:"",category:[],statusEdit:"未开始",urlIncludeIndex:0,urlExcludeIndex:0,urlIncludePath:[],urlExcludePath:[]}]},e.xyz--,e.urlItemWindowShow=!0},addItems:function(){this.urlItemPageTitle="多条添加"},runcrawler:function(){console.log("5")},deleteItem:function(){console.log("6")},exportOut:function(){console.log("7")},show:function(e){console.log(e)},remove:function(e){console.log(e)}}},L=$,E=(a("2c8c"),Object(d["a"])(L,r,o,!1,null,"d3401922",null));t["default"]=E.exports},ab13:function(e,t,a){var r=a("b622"),o=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[o]=!1,"/./"[e](t)}catch(r){}}return!1}},caad:function(e,t,a){"use strict";var r=a("23e7"),o=a("4d64").includes,n=a("44d2"),s=a("ae40"),i=s("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:!i},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n("includes")},d81d:function(e,t,a){"use strict";var r=a("23e7"),o=a("b727").map,n=a("1dde"),s=a("ae40"),i=n("map"),l=s("map");r({target:"Array",proto:!0,forced:!i||!l},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},f520:function(e,t,a){}}]);
//# sourceMappingURL=chunk-6b10ae80.0b79e0d5.js.map